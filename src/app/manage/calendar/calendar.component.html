<div class="p-grid">
    <h5>Post Availability</h5>
    <div class="p-col-12">
        <div class="card">
            <div class="p-fluid p-formgrid p-grid">
                <div class="p-field p-col-4">
                    <label for="trainer"
                        >Venue List<span class="mandatory-fields"
                            >*</span
                        ></label
                    >
                    <p-dropdown
                        [options]="venueList"
                        optionLabel="name"
                        [disabled]="isVenueOwner"
                        [(ngModel)]="selectedVenue"
                        placeholder="Select Venue"
                        (onChange)="onVenueSelect($event)"
                    ></p-dropdown>
                    <div
                        *ngIf="submitted && f.trainer.errors"
                        class="invalid-feedback"
                    >
                        <div *ngIf="f.trainer.errors.required">
                            Please, Select venue
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <full-calendar [options]="options"></full-calendar>
    </div>
</div>
<!-- <div class="p-grid">
    <div class="p-col-12">
        <div class="card">
            <h5>Calendar View</h5>
            <div class="card" *ngIf="showViewCalendar">
                <full-calendar [options]="viewOptions"></full-calendar>
            </div>
        </div>
    </div>
</div> -->
<div class="p-col-12">
    <div class="card">
        <h5>Add Availability</h5>
        <div class="card">
            <p-toast key="calendarSearchtoastmsg"></p-toast>
            <form
                [formGroup]="calendarSearchForm"
                *ngIf="this.calendarSearchForm"
                (ngSubmit)="loadCalendarOnSubmit()"
            >
                <div class="p-fluid p-formgrid p-grid">
                    <div class="p-field p-col-3">
                        <label for="startdt">Start Date</label>
                        <p-calendar
                            formControlName="startDate"
                            [defaultDate]="defaultDate"
                            yearRange="{{ yearRange }}"
                            [minDate]="minDateValue"
                            [maxDate]="maxDateValue"
                            class="p-calendar"
                            inputId="calendar"
                            dateFormat="dd-mm-yy"
                            [showIcon]="true"
                            [ngClass]="{
                                'is-invalid':
                                    submitted &&
                                    calendarSearchf.startDate.errors
                            }"
                            (onSelect)="selectStartDate($event)"
                        >
                        </p-calendar>
                        <div
                            *ngIf="
                                submitted && calendarSearchf.startDate.errors
                            "
                            class="invalid-feedback"
                        >
                            <div
                                *ngIf="
                                    calendarSearchf.startDate.errors
                                        .startDateError
                                "
                            >
                                Please, Select Start Date Before End Date
                            </div>
                            <div
                                *ngIf="
                                    calendarSearchf.startDate.errors.required
                                "
                            >
                                Please, Enter Start Date
                            </div>
                        </div>
                    </div>
                    <div class="p-field p-col-3">
                        <label for="enddt">End Date</label>
                        <p-calendar
                            monthNavigator="true"
                            yearNavigator="true"
                            yearRange="{{ yearRange }}"
                            [minDate]="minDateValue"
                            [maxDate]="maxDateValue"
                            formControlName="endDate"
                            class="p-calendar"
                            inputId="calendar"
                            dateFormat="dd-mm-yy"
                            [showIcon]="true"
                            [ngClass]="{
                                'is-invalid':
                                    submitted && calendarSearchf.endDate.errors
                            }"
                            (onSelect)="selectEndDate($event)"
                        >
                        </p-calendar>
                        <div
                            *ngIf="submitted && calendarSearchf.endDate.errors"
                            class="invalid-feedback"
                        >
                            <div
                                *ngIf="calendarSearchf.endDate.errors.required"
                            >
                                Please, Enter Start Date
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-field">
                    <button
                        pButton
                        pRipple
                        label="Submit"
                        class="p-button p-mr-1 p-mb-2"
                    ></button>
                </div>
            </form>
        </div>
        <!-- <div class="card" *ngIf="showCalendar">
                <full-calendar [options]="options"></full-calendar>
            </div> -->

        <p-dialog
            [(visible)]="eventDialog"
            [style]="{ width: '40%' }"
            header="Slot Details"
            [modal]="true"
            [closable]="false"
        >
            <div>
                <button
                    class="close-btn"
                    pButton
                    pRipple
                    label=""
                    icon="pi pi-times"
                    type="reset"
                    (click)="closePostAvailabilityForm()"
                ></button>
            </div>
            <p-toast key="postAvailabilityToastmsg"></p-toast>
            <ng-template pTemplate="content">
                <form
                    [formGroup]="postAvailabilityForm"
                    *ngIf="this.postAvailabilityForm"
                    (ngSubmit)="onPostAvailabilitySubmit()"
                >
                    <div class="p-fluid p-formgrid p-grid">
                        <div class="p-fluid p-col-4">
                            <label for="title">Slot List</label>
                            <!-- <p-multiSelect [options]="slotListArr" formControlName="slot" defaultLabel="Select Slot"
									optionLabel="slot" display="chip"
									[ngClass]="{ 'is-invalid': submitted && f.slot.errors }">
								</p-multiSelect> -->
                            <div
                                *ngFor="let slot of slotListArr"
                                class="p-field-checkbox"
                            >
                                <p-checkbox
                                    binary="true"
                                    formControlName="{{ slot.id }}"
                                    optionLabel="slot"
                                    [inputId]="slot.key"
                                    value="slot"
                                    (onChange)="
                                        onSlotSelect(slot, $event, 'slot')
                                    "
                                    [value]="slot"
                                ></p-checkbox>
                                <label>{{ slot.slot }}</label>
                                <!-- <p-checkbox formControlName="{{slot.slot}}" [binary]="true"
                                        (onChange)="onSlotSelect(slot, $event, 'recurring')" inputId="binary">
                                    </p-checkbox>
                                    <label for="binary">Recurring slot</label> -->
                            </div>
                            <!-- <div *ngIf="submitted && f.slot.errors" class="invalid-feedback">
									<div *ngIf="f.slot.errors.required">Please, Select Slot</div>
								</div> -->
                        </div>
                        <!-- <div class="p-fluid p-col-4">
								<p-checkbox formControlName="recurring" [binary]="true"
									(onChange)="onRecurringSelect($event)" inputId="binary"></p-checkbox>
								<label for="binary">Recurring slot for all</label>
							</div> -->
                        <!-- <div class="p-field p-col-4">
								<label for="postAvailabilityStatus">Status<span
										class="mandatory-fields">*</span></label>
								<p-dropdown inputId="postAvailabilityStatus" [options]="statuses"
									formControlName="postAvailabilityStatus" placeholder="Select" optionLabel="label"
									(ngModelChange)="onPostAvailabilityStatusSelect($event)"
									[ngClass]="{ 'is-invalid': submitted && f.postAvailabilityStatus.errors}">
								</p-dropdown>
								<div *ngIf="submitted && f.postAvailabilityStatus.errors" class="invalid-feedback">
									<div *ngIf="f.postAvailabilityStatus.errors.required">Please, Select Status</div>
								</div>
							</div> -->
                    </div>
                    <button
                        pButton
                        pRipple
                        label="Save"
                        icon="pi pi-check"
                    ></button>
                    <!-- <button pButton pRipple label="Reset" icon="pi pi-times" type="reset"
                            (click)="reset()"></button> -->
                </form>
            </ng-template>
            <div class="button-set back">
                <div class="p-fluid p-formgrid">
                    <p-toast></p-toast>
                </div>
            </div>
        </p-dialog>

        <p-dialog
            [(visible)]="deleteEventDialog"
            [style]="{ width: '40%', height: '30%' }"
            header="Slot Details"
            [modal]="true"
            [closable]="true"
        >
            <p-toast key="postAvailabilityDeleteToastmsg"></p-toast>
            <ng-template pTemplate="content">
                <form
                    [formGroup]="deletePostAvailabilityForm"
                    *ngIf="this.deletePostAvailabilityForm"
                    (ngSubmit)="onPostAvailabilityDeleteSubmit()"
                >
                    <label>Are you sure want to delete this slot?</label>
                    <br />
                    <input
                        formControlName="disable"
                        type="hidden"
                        value="Yes"
                    />
                    <button
                        pButton
                        pRipple
                        label="Yes"
                        icon="pi pi-check"
                    ></button>
                    <button
                        pButton
                        pRipple
                        label="Cancel"
                        icon="pi pi-cancel"
                        class="p-button-text"
                        type="reset"
                        (click)="cancelPostAvailability()"
                    ></button>
                </form>
            </ng-template>
            <div class="button-set back">
                <div class="p-fluid p-formgrid">
                    <p-toast></p-toast>
                </div>
            </div>
        </p-dialog>
    </div>
</div>
